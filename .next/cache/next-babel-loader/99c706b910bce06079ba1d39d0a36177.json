{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Button, Container, Divider, Grid, Header, Icon, Image, List, Menu, Responsive, Segment, Sidebar, Visibility } from \"semantic-ui-react\";\nimport { Link } from '../routes';\nimport { connect } from 'react-redux';\nimport actions from '../redux/actions/authActions';\nimport createAuth0Client from '@auth0/auth0-spa-js';\nimport HeaderSegment from './HeaderSegment'; //import { useAuth0 } from '../../contexts/auth0-context';\n\nvar HomepageHeading = function HomepageHeading(_ref) {\n  var mobile = _ref.mobile;\n  return __jsx(Container, {\n    text: true\n  }, __jsx(Header, {\n    as: \"h1\",\n    content: \"Wine Tripping\",\n    inverted: true,\n    style: {\n      fontSize: mobile ? '2em' : '4em',\n      fontWeight: 'normal',\n      marginBottom: 0,\n      marginTop: mobile ? '1.5em' : '3em'\n    }\n  }), __jsx(Header, {\n    as: \"h2\",\n    content: \"Find your favorite region with us...\",\n    inverted: true,\n    style: {\n      fontSize: mobile ? '1.5em' : '1.7em',\n      fontWeight: 'normal',\n      marginTop: mobile ? '0.5em' : '1.5em'\n    }\n  }), __jsx(Button, {\n    primary: true,\n    size: \"huge\"\n  }, \"Plan a trip\", __jsx(Icon, {\n    name: \"right arrow\"\n  })));\n};\n\n_c = HomepageHeading;\n\nvar Auth0Connection = /*#__PURE__*/function (_React$Component) {\n  _inherits(Auth0Connection, _React$Component);\n\n  var _super = _createSuper(Auth0Connection);\n\n  function Auth0Connection(props) {\n    var _this;\n\n    _classCallCheck(this, Auth0Connection);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"initializeAuth0\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var auth0Client, isAuthenticated, user;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return createAuth0Client(_this.config);\n\n            case 2:\n              auth0Client = _context.sent;\n              console.log('auth0Client : ' + JSON.stringify(auth0Client));\n\n              _this.setState({\n                auth0Client: auth0Client\n              }); // check to see if they have been redirected after login\n\n\n              if (!window.location.search.includes('code=')) {\n                _context.next = 7;\n                break;\n              }\n\n              return _context.abrupt(\"return\", _this.handleRedirectCallback());\n\n            case 7:\n              _context.next = 9;\n              return auth0Client.isAuthenticated();\n\n            case 9:\n              isAuthenticated = _context.sent;\n\n              if (!isAuthenticated) {\n                _context.next = 16;\n                break;\n              }\n\n              _context.next = 13;\n              return auth0Client.getUser();\n\n            case 13:\n              _context.t0 = _context.sent;\n              _context.next = 17;\n              break;\n\n            case 16:\n              _context.t0 = null;\n\n            case 17:\n              user = _context.t0;\n              console.log('user : ' + JSON.stringify(user));\n\n              _this.setState({\n                isLoading: false,\n                isAuthenticated: isAuthenticated,\n                user: user\n              });\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleRedirectCallback\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var user;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.setState({\n                isLoading: true\n              });\n\n              _context2.next = 3;\n              return _this.state.auth0Client.handleRedirectCallback();\n\n            case 3:\n              _context2.next = 5;\n              return _this.state.auth0Client.getUser();\n\n            case 5:\n              user = _context2.sent;\n\n              _this.setState({\n                user: user,\n                isAuthenticated: true,\n                isLoading: false\n              });\n\n              window.history.replaceState({}, document.title, window.location.pathname);\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    })));\n\n    _this.state = {\n      auth0Client: null,\n      isLoading: true,\n      isAuthenticated: false,\n      user: []\n    };\n    _this.config = {\n      domain: process.env.REACT_APP_AUTH0_DOMAIN || 'dev-14avhjuy.auth0.com',\n      client_id: process.env.REACT_APP_AUTH0_CLIENT_ID || 'ZJ14f961zjftMYbOBnZPnEGJd3ZHyQJC',\n      redirect_uri: 'http://localhost:3000/'\n    };\n    _this.login = _this.login.bind(_assertThisInitialized(_this));\n    _this.logout = _this.logout.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Auth0Connection, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initializeAuth0();\n    } // initialize the auth0 library\n\n  }, {\n    key: \"login\",\n    value: function login(e) {\n      var _this2 = this;\n\n      var auth0Client = this.state.auth0Client; //this.setState({data: e.target.value});\n\n      auth0Client.loginWithRedirect({\n        redirect_uri: 'http://localhost:3000/'\n      }).then(function (token) {\n        auth0Client.getUser().then(function (user) {\n          _this2.setState({\n            user: user\n          });\n\n          console.log('---here--' + user);\n        });\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout(e) {\n      var auth0Client = this.state.auth0Client;\n      auth0Client.logout();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", null, __jsx(DesktopContainer, {\n        auth0: this.state,\n        login: this.login,\n        logout: this.logout\n      }), __jsx(MobileContainer, {\n        auth0: this.state,\n        login: this.login,\n        logout: this.logout\n      }));\n    }\n  }]);\n\n  return Auth0Connection;\n}(React.Component);\n\nvar DesktopContainer = /*#__PURE__*/function (_React$Component2) {\n  _inherits(DesktopContainer, _React$Component2);\n\n  var _super2 = _createSuper(DesktopContainer);\n\n  function DesktopContainer(props) {\n    var _this3;\n\n    _classCallCheck(this, DesktopContainer);\n\n    _this3 = _super2.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this3), \"state\", {});\n\n    _defineProperty(_assertThisInitialized(_this3), \"hideFixedMenu\", function () {\n      return _this3.setState({\n        fixed: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this3), \"showFixedMenu\", function () {\n      return _this3.setState({\n        fixed: true\n      });\n    });\n\n    return _this3;\n  }\n\n  _createClass(DesktopContainer, [{\n    key: \"render\",\n    value: function render() {\n      console.log('Desktop');\n      var children = this.props.children;\n      var fixed = this.state.fixed;\n      return __jsx(Responsive, Responsive.onlyComputer, __jsx(Visibility, {\n        once: false,\n        onBottomPassed: this.showFixedMenu,\n        onBottomPassedReverse: this.hideFixedMenu\n      }, __jsx(Segment, {\n        inverted: true,\n        textAlign: \"center\",\n        style: {\n          minHeight: 700,\n          padding: '1em 0em'\n        },\n        vertical: true\n      }, __jsx(Menu, {\n        fixed: fixed ? 'top' : null,\n        inverted: !fixed,\n        pointing: !fixed,\n        secondary: !fixed,\n        size: \"large\"\n      }, __jsx(Container, null, __jsx(Menu.Item, {\n        as: \"a\",\n        active: true\n      }, \"Home\"), __jsx(Menu.Item, {\n        as: \"a\"\n      }, \"Explore\"), __jsx(Menu.Item, {\n        as: \"a\"\n      }, \"Plan Trip\"), __jsx(Menu.Item, {\n        as: \"a\"\n      }, \"Sommelier\"), __jsx(Menu.Item, {\n        position: \"right\"\n      }, !this.props.auth0.isLoading && !this.props.auth0.user && __jsx(Button, {\n        as: \"a\",\n        onClick: this.props.login,\n        inverted: !fixed\n      }, \"Log in\"), !this.props.auth0.isLoading && this.props.auth0.user && __jsx(React.Fragment, null, __jsx(\"h1\", null, this.props.auth0.user.name), __jsx(Button, {\n        as: \"a\",\n        onClick: this.props.logout,\n        inverted: !fixed,\n        primary: fixed,\n        style: {\n          marginLeft: '0.5em'\n        }\n      }, \"Logout\"))))), !this.props.auth0.isLoading && this.props.auth0.user && __jsx(React.Fragment, null, __jsx(\"h1\", null, \"You are logged in!\"), __jsx(\"p\", null, \"Hello \", this.props.auth0.user.name, \"--\", this.props.auth0.user.email, \"--\"), this.props.auth0.user.picture && __jsx(\"img\", {\n        src: this.props.auth0.user.picture,\n        alt: \"My Avatar\"\n      })), !this.props.auth0.isLoading && !this.props.auth0.user && __jsx(HomepageHeading, null))), !this.props.auth0.isLoading && !this.props.auth0.user && __jsx(HeaderSegment, null));\n    }\n  }]);\n\n  return DesktopContainer;\n}(React.Component);\n\nvar MobileContainer = /*#__PURE__*/function (_React$Component3) {\n  _inherits(MobileContainer, _React$Component3);\n\n  var _super3 = _createSuper(MobileContainer);\n\n  function MobileContainer(props) {\n    var _this4;\n\n    _classCallCheck(this, MobileContainer);\n\n    _this4 = _super3.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this4), \"state\", {});\n\n    _defineProperty(_assertThisInitialized(_this4), \"handlePusherClick\", function () {\n      var sidebarOpened = _this4.state.sidebarOpened;\n      if (sidebarOpened) _this4.setState({\n        sidebarOpened: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this4), \"handleToggle\", function () {\n      return _this4.setState({\n        sidebarOpened: !_this4.state.sidebarOpened\n      });\n    });\n\n    return _this4;\n  }\n\n  _createClass(MobileContainer, [{\n    key: \"render\",\n    value: function render() {\n      console.log('mobile');\n      var children = this.props.children;\n      var sidebarOpened = this.state.sidebarOpened;\n      return __jsx(Responsive, Responsive.onlyMobile, __jsx(Sidebar.Pushable, null, __jsx(Sidebar, {\n        as: Menu,\n        animation: \"uncover\",\n        inverted: true,\n        vertical: true,\n        visible: sidebarOpened\n      }, __jsx(Menu.Item, {\n        as: \"a\",\n        active: true\n      }, \"Home\"), __jsx(Menu.Item, {\n        as: \"a\"\n      }, \"Explore\"), __jsx(Menu.Item, {\n        as: \"a\"\n      }, \"Plan Trip\"), __jsx(Menu.Item, {\n        as: \"a\"\n      }, \"Sommelier\"), __jsx(Menu.Item, {\n        as: \"a\"\n      }, \"Log in\"), __jsx(Menu.Item, {\n        as: \"a\"\n      }, \"Sign Up\")), __jsx(Sidebar.Pusher, {\n        dimmed: sidebarOpened,\n        onClick: this.handlePusherClick,\n        style: {\n          minHeight: '100vh'\n        }\n      }, __jsx(Segment, {\n        inverted: true,\n        textAlign: \"center\",\n        style: {\n          minHeight: 350,\n          padding: '1em 0em'\n        },\n        vertical: true\n      }, __jsx(Container, null, __jsx(Menu, {\n        inverted: true,\n        pointing: true,\n        secondary: true,\n        size: \"large\"\n      }, __jsx(Menu.Item, {\n        onClick: this.handleToggle\n      }, __jsx(Icon, {\n        name: \"sidebar\"\n      })), __jsx(Menu.Item, {\n        position: \"right\"\n      }, !this.props.auth0.isLoading && !this.props.auth0.user && __jsx(Button, {\n        as: \"a\",\n        onClick: this.props.login,\n        inverted: true\n      }, \"Log in\"), !this.props.auth0.isLoading && this.props.auth0.user && __jsx(Button, {\n        as: \"a\",\n        onClick: this.props.logout,\n        inverted: true,\n        style: {\n          marginLeft: '0.5em'\n        }\n      }, \"Logout\")))), !this.props.auth0.isLoading && !this.props.auth0.user && __jsx(HomepageHeading, {\n        mobile: true\n      })), !this.props.auth0.isLoading && !this.props.auth0.user && __jsx(HeaderSegment, null))));\n    }\n  }]);\n\n  return MobileContainer;\n}(React.Component);\n\nvar ResponsiveContainer = function ResponsiveContainer(_ref4) {\n  var children = _ref4.children;\n  return __jsx(\"div\", null, __jsx(DesktopContainer, null, children), __jsx(MobileContainer, null, children));\n};\n\n_c2 = ResponsiveContainer;\n\nvar HeaderLayout = /*#__PURE__*/function (_React$Component4) {\n  _inherits(HeaderLayout, _React$Component4);\n\n  var _super4 = _createSuper(HeaderLayout);\n\n  _createClass(HeaderLayout, null, [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(_ref5) {\n      var store = _ref5.store;\n    }\n  }]);\n\n  function HeaderLayout(props) {\n    var _this5;\n\n    _classCallCheck(this, HeaderLayout);\n\n    _this5 = _super4.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this5), \"login_rt\", function () {\n      _this5.props.login('loginType');\n    });\n\n    return _this5;\n  }\n\n  _createClass(HeaderLayout, [{\n    key: \"render\",\n    value: function render() {\n      return __jsx(ResponsiveContainer, null);\n    }\n  }]);\n\n  return HeaderLayout;\n}(React.Component);\n\nexport default connect(function (state) {\n  return state;\n}, actions)(Auth0Connection);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"HomepageHeading\");\n$RefreshReg$(_c2, \"ResponsiveContainer\");","map":null,"metadata":{},"sourceType":"module"}